{"version":3,"file":"main.js","sourceRoot":"","sources":["../../../src/main/main.ts"],"names":[],"mappings":";;;;;;;;;;AACA,uCAA+C;AAC/C,6BAA6B;AAC7B,iCAAiC;AAEjC,6BAA6B;AAE7B,IAAI,QAAa,CAAC;AAElB,eAAe,EAAU;IACvB,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC;AACjD,CAAC;AAED,cAAG,CAAC,EAAE,CAAC,OAAO,EAAE,GAAS,EAAE;IACzB,IAAI,GAAG,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,CAAC;IACzB,IAAI,EAAE,GAAG,IAAI,IAAI,CAAC,aAAa,EAAE,CAAC;IAClC,EAAE,CAAC,KAAK,CAAC,GAAG,EAAE,SAAS,CAAC,CAAA;IACxB,GAAG,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;IACtB,QAAQ,GAAG,MAAM,MAAM,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;IAC1D,IAAI,MAAM,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,CAAC;IAC/B,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;IAC1B,QAAQ;IACR,MAAM,MAAM,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;AACpC,CAAC,CAAA,CAAC,CAAC;AAEH;;QACE,OAAO,IAAI,EAAE;YACX,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;YACnB,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA;SAClB;IACH,CAAC;CAAA;AAED,oCAAoC;AACpC,cAAG,CAAC,EAAE,CAAC,mBAAmB,EAAE,GAAG,EAAE;IAC/B,2DAA2D;IAC3D,8DAA8D;IAC9D,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;QACjC,cAAG,CAAC,IAAI,EAAE,CAAC;KACZ;AACH,CAAC,CAAC,CAAC;AAEH,cAAG,CAAC,EAAE,CAAC,aAAa,EAAE,GAAG,EAAE;AAE3B,CAAC,CAAC,CAAC","sourcesContent":["import * as electron from \"electron\";\nimport { app, globalShortcut } from \"electron\";\nimport * as qrpc from \"qrpc\";\nimport * as libmux from \"libmux\";\n\nimport * as rpc from \"./rpc\";\n\nlet listener: any;\n\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(res => setTimeout(res, ms));\n}\n\napp.on(\"ready\", async () => {\n  var api = new qrpc.API();\n  var om = new qrpc.ObjectManager();\n  om.mount(api, \"objects\")\n  rpc.register(api, om);\n  listener = await libmux.ListenWebsocket(\"localhost:4242\");\n  var server = new qrpc.Server();\n  console.log(\"serving...\"); \n  //loop()\n  await server.serve(listener, api);\n});\n\nasync function loop() {\n  while (true) {\n    console.log(\"ping\")\n    await sleep(3000)\n  }\n}\n\n// Quit when all windows are closed.\napp.on(\"window-all-closed\", () => {\n  // On OS X it is common for applications and their menu bar\n  // to stay active until the user quits explicitly with Cmd + Q\n  if (process.platform !== \"darwin\") {\n    app.quit();\n  }\n});\n\napp.on(\"before-quit\", () => {\n\n});\n"]}